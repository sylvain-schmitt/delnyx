{% extends 'admin/layout/base.html.twig' %}

{% block title %}Devis {{ quote.numero }} - Administration Delnyx{% endblock %}

{% block page_title %}Devis {{ quote.numero }}{% endblock %}

{% block body %}
	<div class="space-y-6">

		{# Header avec breadcrumb #}
		<div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 scroll-animate">
			<div>
				<h1 class="text-2xl font-bold text-white">Devis {{ quote.numero }}</h1>
				<nav class="flex items-center space-x-2 text-sm text-white/60 mt-1">
					<a href="{{ path('admin_dashboard') }}" class="hover:text-white transition-colors duration-200">Dashboard</a>
					<span>{{ ux_icon('lucide:chevron-right', {class: 'w-4 h-4'}) }}</span>
					<a href="{{ path('admin_quote_index') }}" class="hover:text-white transition-colors duration-200">Devis</a>
					<span>{{ ux_icon('lucide:chevron-right', {class: 'w-4 h-4'}) }}</span>
					<span class="text-white">{{ quote.numero }}</span>
				</nav>
			</div>
			<div class="flex gap-3 flex-wrap">
				{% if quote.statut.value == 'draft' %}
					<a href="{{ path('admin_quote_edit', {id: quote.id}) }}" class="btn-secondary flex items-center gap-2">
						{{ ux_icon('lucide:pencil', {class: 'w-4 h-4'}) }}
						Modifier
					</a>
				{% endif %}
				{# Bouton Créer un avenant (si signé) #}
				{% if quote.statut.value == 'signed' %}
					{# CORRECTION ROUTE : ajout de quote_id #}
					<a href="{{ path('admin_amendment_new', {quote_id: quote.id}) }}" class="btn-primary flex items-center gap-2">
						{{ ux_icon('lucide:file-plus', {class: 'w-4 h-4'}) }}
						Créer un avenant
					</a>
				{% endif %}
				<a href="{{ path('admin_quote_index') }}" class="btn-secondary flex items-center gap-2">
					{{ ux_icon('lucide:arrow-left', {class: 'w-4 h-4'}) }}
					Retour
				</a>
			</div>
		</div>

		{# Alerte si devis signé (immuable) #}
		{% if quote.statut.value == 'signed' %}
			<div class="bg-blue-500/20 border border-blue-500/30 rounded-xl p-4 scroll-animate">
				<div class="flex items-start gap-3">
					{{ ux_icon('lucide:lock', {class: 'w-5 h-5 text-blue-400 mt-0.5'}) }}
					<div class="flex-1">
						<p class="text-blue-300 font-medium mb-1">Document immuable</p>
						<p class="text-blue-200/80 text-sm">Ce devis est signé et ne peut plus être modifié. Pour apporter des modifications, créez un avenant.</p>
					</div>
				</div>
			</div>
		{% endif %}

		{# Alerte si devis annulé #}
		{% if quote.statut.value == 'cancelled' %}
			<div class="bg-red-500/20 border border-red-500/30 rounded-xl p-4 scroll-animate">
				<div class="flex items-start gap-3">
					{{ ux_icon('lucide:x-circle', {class: 'w-5 h-5 text-red-400 mt-0.5'}) }}
					<div class="flex-1">
						<p class="text-red-300 font-medium mb-1">Devis annulé</p>
						<p class="text-red-200/80 text-sm">Ce devis a été annulé.</p>
					</div>
				</div>
			</div>
		{% endif %}

		<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

			{# Colonne principale #}
			<div class="lg:col-span-2 space-y-6">

				{# Informations du devis #}
				<div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl p-6 scroll-animate">
					<h2 class="text-xl font-semibold text-white mb-6 flex items-center gap-2">
						{{ ux_icon('lucide:file-text', {class: 'w-5 h-5'}) }}
						Informations du devis
					</h2>

					<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
						<div>
							<p class="text-sm text-white/60 mb-1">Client</p>
							{% if quote.client %}
								{# CORRECTION ROUTE : admin_client_edit au lieu de admin_client_show #}
								<a href="{{ path('admin_client_edit', {id: quote.client.id}) }}" class="text-white hover:text-blue-300 transition-colors font-medium">
									{{ quote.client.nomComplet }}
								</a>
								{% if quote.client.email %}
									<p class="text-sm text-blue-400 mt-0.5">{{ quote.client.email }}</p>
								{% endif %}
							{% else %}
								<p class="text-white">Client inconnu</p>
							{% endif %}
						</div>

						<div>
							<p class="text-sm text-white/60 mb-1">Statut</p>
							{# CORRECTION : quote.statut au lieu de quote.statutEnum #}
							{% set status = quote.statut %}
							<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
								{% if status.value == 'draft' %}bg-gray-500/20 text-gray-300
								{% elseif status.value == 'sent' %}bg-blue-500/20 text-blue-300
								{% elseif status.value == 'signed' %}bg-green-500/20 text-green-300
								{% elseif status.value == 'cancelled' %}bg-gray-600/20 text-gray-400
								{% else %}bg-gray-500/20 text-gray-300{% endif %}">
								{{ status.label }}
							</span>
						</div>

						<div>
							<p class="text-sm text-white/60 mb-1">Date de création</p>
							<p class="text-white">{{ quote.dateCreation|date('d/m/Y à H:i') }}</p>
						</div>

						<div>
							<p class="text-sm text-white/60 mb-1">Date de validité</p>
							<p class="text-white">
								{% if quote.dateValidite %}
									{{ quote.dateValidite|date('d/m/Y') }}
								{% else %}
									<span class="text-white/40 italic">Non définie</span>
								{% endif %}
							</p>
						</div>

						{# CORRECTION : dateEnvoi au lieu de sentAt #}
						{% if quote.dateEnvoi %}
							<div>
								<p class="text-sm text-white/60 mb-1">Date d'envoi</p>
								<p class="text-white">{{ quote.dateEnvoi|date('d/m/Y à H:i') }}</p>
								{% if quote.sentCount > 0 %}
									<p class="text-xs text-white/60">Envoyé {{ quote.sentCount }} fois</p>
								{% endif %}
								{% if quote.deliveryChannel %}
									<p class="text-xs text-blue-300 mt-1">Canal : {{ quote.deliveryChannel }}</p>
								{% endif %}
							</div>
						{% endif %}

						{% if quote.dateSignature %}
							<div>
								<p class="text-sm text-white/60 mb-1">Date de signature</p>
								<p class="text-white">{{ quote.dateSignature|date('d/m/Y à H:i') }}</p>
							</div>
						{% endif %}
					</div>
				</div>

				{# Lignes du devis #}
				<div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl p-6 scroll-animate animate-delay-100">
					<h2 class="text-xl font-semibold text-white mb-6 flex items-center gap-2">
						{{ ux_icon('lucide:list', {class: 'w-5 h-5'}) }}
						Lignes du devis
					</h2>

					{% if quote.lines|length > 0 %}
						{# Version desktop : table #}
						<div class="hidden md:block overflow-x-auto">
							<table class="w-full">
								<thead class="bg-white/5 border-b border-white/20">
									<tr>
										<th class="px-4 py-3 text-left text-xs font-semibold text-white/80 uppercase">Description</th>
										<th class="px-4 py-3 text-right text-xs font-semibold text-white/80 uppercase">Qté</th>
										<th class="px-4 py-3 text-right text-xs font-semibold text-white/80 uppercase">Prix unitaire</th>
										{% if companySettings and companySettings.isTvaEnabled() %}
											<th class="px-4 py-3 text-right text-xs font-semibold text-white/80 uppercase">TVA</th>
											<th class="px-4 py-3 text-right text-xs font-semibold text-white/80 uppercase">Total HT</th>
										{% endif %}
										<th class="px-4 py-3 text-right text-xs font-semibold text-white/80 uppercase">Total TTC</th>
									</tr>
								</thead>
								<tbody class="divide-y divide-white/10">
									{% for line in quote.lines %}
										<tr>
											<td class="px-4 py-3 text-white">{{ line.description }}</td>
											<td class="px-4 py-3 text-right text-white">{{ line.quantity }}</td>
											<td class="px-4 py-3 text-right text-white">{{ line.unitPrice|number_format(2, ',', ' ') }}
												€</td>
											{% if companySettings and companySettings.isTvaEnabled() %}
												<td class="px-4 py-3 text-right text-white">
													{% if quote.usePerLineTva and line.tvaRate %}
														{{ line.tvaRate }}%
													{% elseif quote.usePerLineTva %}
														{{ quote.tauxTVA }}%
													{% else %}
														{{ quote.tauxTVA }}%
													{% endif %}
												</td>
												<td class="px-4 py-3 text-right text-white font-medium">{{ line.totalHt|number_format(2, ',', ' ') }}
													€</td>
											{% endif %}
											<td class="px-4 py-3 text-right text-white font-medium">{{ line.totalTtcFormatted }}</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>

						{# Version mobile : cards #}
						<div class="md:hidden space-y-4">
							{% for line in quote.lines %}
								<div class="bg-white/5 border border-white/10 rounded-lg p-4">
									<div class="mb-3">
										<h3 class="text-white font-medium mb-1">{{ line.description }}</h3>
									</div>
									<div class="space-y-2 text-sm">
										<div class="flex justify-between">
											<span class="text-white/60">Quantité</span>
											<span class="text-white">{{ line.quantity }}</span>
										</div>
										<div class="flex justify-between">
											<span class="text-white/60">Prix unitaire</span>
											<span class="text-white">{{ line.unitPrice|number_format(2, ',', ' ') }}
												€</span>
										</div>
										{% if companySettings and companySettings.isTvaEnabled() %}
											<div class="flex justify-between">
												<span class="text-white/60">TVA</span>
												<span class="text-white">
													{% if quote.usePerLineTva and line.tvaRate %}
														{{ line.tvaRate }}%
													{% elseif quote.usePerLineTva %}
														{{ quote.tauxTVA }}%
													{% else %}
														{{ quote.tauxTVA }}%
													{% endif %}
												</span>
											</div>
											<div class="flex justify-between pt-2 border-t border-white/10">
												<span class="text-white/60">Total HT</span>
												<span class="text-white font-medium">{{ line.totalHt|number_format(2, ',', ' ') }}
													€</span>
											</div>
										{% endif %}
										<div class="flex justify-between {% if companySettings and companySettings.isTvaEnabled() %}{% else %}pt-2 border-t border-white/10{% endif %}">
											<span class="text-white font-medium">Total TTC</span>
											<span class="text-white font-bold">{{ line.totalTtcFormatted }}</span>
										</div>
									</div>
								</div>
							{% endfor %}
						</div>
					{% else %}
						<p class="text-white/60 text-center py-8">Aucune ligne dans ce devis</p>
					{% endif %}
				</div>
                				{# Avenants #}
				{% if amendments|length > 0 %}
					<div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl p-6 scroll-animate animate-delay-200">
						<h2 class="text-xl font-semibold text-white mb-6 flex items-center gap-2">
							{{ ux_icon('lucide:file-edit', {class: 'w-5 h-5'}) }}
							Avenants ({{ amendments|length }})
						</h2>

						<div class="space-y-3">
							{% for amendment in amendments %}
								<div class="bg-white/5 border border-white/10 rounded-lg p-4">
									<div class="flex items-start justify-between">
										<div class="flex-1">
											<div class="flex items-center gap-2 mb-2">
												<a href="{{ path('admin_amendment_show', {id: amendment.id}) }}" class="text-blue-400 hover:text-blue-300 transition-colors font-medium">
													{{ amendment.numero }}
												</a>
												{# CORRECTION : utilisation de statut au lieu de statutEnum #}
												{% set status = amendment.statut %}
												<span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium
													{% if status.value == 'draft' %}bg-gray-500/20 text-gray-300
													{% elseif status.value == 'sent' %}bg-blue-500/20 text-blue-300
													{% elseif status.value == 'signed' %}bg-green-500/20 text-green-300
													{% elseif status.value == 'cancelled' %}bg-gray-600/20 text-gray-400
													{% else %}bg-gray-500/20 text-gray-300{% endif %}">
													{{ status.label }}
												</span>
											</div>
											<p class="text-sm text-white/80 mb-1">{{ amendment.motif }}</p>
											<div class="flex items-center gap-4 text-xs text-white/60">
												<span>{{ amendment.dateCreation|date('d/m/Y') }}</span>
												{% if amendment.dateSignature %}
													<span>Signé le
														{{ amendment.dateSignature|date('d/m/Y') }}</span>
												{% endif %}
												<span class="font-medium text-white">{{ amendment.montantTTCFormate }}</span>
											</div>
										</div>
									</div>
								</div>
							{% endfor %}
						</div>
					</div>
				{% endif %}

				{# Conditions et notes #}
				{% if quote.conditionsPaiement or quote.delaiLivraison or quote.notes or quote.statut.value == 'cancelled' %}
					<div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl p-6 scroll-animate animate-delay-200">
						<h2 class="text-xl font-semibold text-white mb-6 flex items-center gap-2">
							{{ ux_icon('lucide:info', {class: 'w-5 h-5'}) }}
							Conditions et notes
						</h2>

						<div class="space-y-4">
							{% if quote.conditionsPaiement %}
								<div>
									<p class="text-sm text-white/60 mb-1">Conditions de paiement</p>
									<p class="text-white">{{ quote.conditionsPaiement }}</p>
								</div>
							{% endif %}

							{% if quote.delaiLivraison %}
								<div>
									<p class="text-sm text-white/60 mb-1">Délai de livraison</p>
									<p class="text-white">{{ quote.delaiLivraison }}</p>
								</div>
							{% endif %}

							{% if quote.notes %}
								<div>
									<p class="text-sm text-white/60 mb-1">Notes</p>
									<p class="text-white whitespace-pre-line">{{ quote.notes }}</p>
								</div>
							{% endif %}

							{# Si annulé mais pas de notes, afficher un message #}
							{% if quote.statut.value == 'cancelled' and not quote.notes %}
								<div>
									<p class="text-sm text-white/60 mb-1">Raison d'annulation</p>
									<p class="text-white italic">Aucune raison spécifiée</p>
								</div>
							{% endif %}
						</div>
					</div>
				{% endif %}
			</div>

			{# Colonne latérale #}
			<div class="space-y-6">

				{# Montants #}
				<div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl p-6 scroll-animate animate-delay-100">
					<h2 class="text-xl font-semibold text-white mb-6 flex items-center gap-2">
						{{ ux_icon('lucide:calculator', {class: 'w-5 h-5'}) }}
						Montants
					</h2>

					<div class="space-y-4">
						{% if companySettings and companySettings.isTvaEnabled() %}
							<div class="flex justify-between items-center mb-1">
								<span class="text-white/60">Total HT initial</span>
								<span class="text-white font-semibold">{{ quote.montantHTInitialFormate }}</span>
							</div>

							{# TVA #}
                            {% if quote.usePerLineTva %}
								<div class="flex justify-between items-center">
									<span class="text-white/60">Total TVA initial</span>
									<span class="text-white font-semibold">{{ quote.montantTVAInitialFormate }}</span>
								</div>
							{% else %}
								<div class="flex justify-between items-center">
									<span class="text-white/60">TVA ({{ quote.tauxTVA }}%) initial</span>
									<span class="text-white font-semibold">{{ quote.montantTVAInitialFormate }}</span>
								</div>
							{% endif %}

							<div class="pt-2 border-t border-white/10 flex justify-between items-center">
								<span class="text-white/60">Total TTC initial</span>
								<span class="text-white font-semibold">{{ quote.montantTTCInitialFormate }}</span>
							</div>
						{% else %}
							{# TVA désactivée : afficher TTC au lieu de HT #}
							<div class="flex justify-between items-center">
								<span class="text-white/60">Total TTC initial</span>
								<span class="text-white font-semibold">{{ quote.montantTTCInitialFormate }}</span>
							</div>
						{% endif %}

						{# Calcul Séquentiel des Avenants #}
						{% set currentTotal = quote.montantTTCInitial %}
						{% set avenantsSignes = amendments|filter(a => a.statut.value == 'signed') %}

						{% if avenantsSignes|length > 0 %}
							<div class="pt-4 border-t border-white/20">
								<p class="text-sm text-white/60 mb-2">Historique des modifications</p>
								{% for amendment in avenantsSignes %}
									{# Utilisation du delta réel de l'avenant (fix cumulatif) #}
									{% set delta = amendment.montantDeltaTTC %}

									<div class="flex justify-between items-center text-sm mb-1">
										<span class="text-white/60">{{ amendment.numero }}</span>
										<span class="{% if delta > 0 %}text-blue-300{% elseif delta < 0 %}text-green-300{% else %}text-white{% endif %}">
											{% if delta > 0 %}+{% endif %}{{ delta|number_format(2, ',', ' ') }} €
										</span>
									</div>
									{% set currentTotal = currentTotal + delta %}
								{% endfor %}
							</div>
						{% endif %}

						{# Total Final #}
						<div class="pt-4 border-t border-white/20 flex justify-between items-center">
							<span class="text-white font-semibold text-lg">Total TTC final</span>
							<span class="text-white font-bold text-xl">
								{{ currentTotal|number_format(2, ',', ' ') }} €
							</span>
						</div>

						{# Calcul du total payé (règlements effectifs) #}
						{% set totalPaid = 0 %}

						{# 1. Facture Principale (Initial) #}
						{% if quote.invoice and quote.invoice.statut == 'paid' %}
							{% set totalPaid = quote.montantTTCInitial %}
						{% else %}
							{% set totalPaid = quote.totalPaidDeposits %}
						{% endif %}

						{# 2. Factures des avenants et remoursements d'avoirs #}
						{% for amendment in avenantsSignes %}
							{# Complément d'avenant payé #}
							{% if amendment.invoice and amendment.invoice.statut == 'paid' %}
								{% set totalPaid = totalPaid + amendment.invoice.montantTTC %}
							{% endif %}

							{# Avoir remboursé (soustraire du payé car l'argent est retourné au client) #}
							{% if amendment.creditNote and amendment.creditNote.statut == 'refunded' %}
								{% set totalPaid = totalPaid - amendment.creditNote.montantTTC %}
							{% endif %}
						{% endfor %}

						{% if totalPaid > 0 %}
							<div class="pt-4 border-t border-white/20">
								<div class="flex justify-between items-center mb-2">
									<span class="text-white/60">Déjà réglé</span>
									<span class="text-green-400 font-semibold">
										{{ totalPaid|number_format(2, ',', ' ') }} €
									</span>
								</div>

								{% set solde = currentTotal - totalPaid %}
								<div class="flex justify-between items-center">
									<span class="text-white font-medium">
										{% if solde < 0 %}Reste à rembourser{% else %}Reste à payer{% endif %}
									</span>
									<span class="text-white font-bold">
										{{ solde|abs|number_format(2, ',', ' ') }} €
									</span>
								</div>
							</div>
						{% endif %}
					</div>
				</div>

				{# Accomptes #}
				{% if quote.statut.value == 'signed' %}
					<div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl p-6 scroll-animate animate-delay-150">
						<h2 class="text-xl font-semibold text-white mb-6 flex items-center gap-2">
							{{ ux_icon('lucide:credit-card', {class: 'w-5 h-5'}) }}
							Accomptes
						</h2>

						{% if quote.deposits|length > 0 %}
							<div class="space-y-3 mb-4">
								{% for deposit in quote.deposits %}
									<div class="bg-white/5 border border-white/10 rounded-lg p-3">
										<div class="flex justify-between items-start">
											<div>
												<span class="text-white font-medium">{{ deposit.formattedAmount }}</span>
												{% if deposit.percentage %}
													<span class="text-white/60 text-sm">({{ deposit.percentage|number_format(0) }}%)</span>
												{% endif %}
											</div>
											<span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium
												{% if deposit.status.value == 'pending' %}bg-yellow-500/20 text-yellow-300
												{% elseif deposit.status.value == 'paid' %}bg-green-500/20 text-green-300
												{% elseif deposit.status.value == 'cancelled' %}bg-gray-600/20 text-gray-400
												{% elseif deposit.status.value == 'refunded' %}bg-blue-500/20 text-blue-300
												{% endif %}">
												{{ deposit.status.label }}
											</span>

											{% if deposit.status.value == 'pending' %}
												<button type="button" class="inline-block ml-2 text-blue-400 hover:text-blue-300 transition-colors" title="Renvoyer l'email" data-controller="confirm-modal-trigger" data-confirm-modal-trigger-url-value="{{ path('admin_deposit_resend_email', {id: deposit.id}) }}" data-confirm-modal-trigger-csrf-token-value="{{ csrf_token('resend_email_' ~ deposit.id) }}" data-confirm-modal-trigger-title-value="Renvoyer l'email" data-confirm-modal-trigger-message-value="Voulez-vous renvoyer l'email de demande d'acompte au client ?" data-confirm-modal-trigger-button-text-value="Renvoyer" data-action="click->confirm-modal-trigger#open">
													{{ ux_icon('lucide:send', {class: 'w-4 h-4'}) }}
												</button>
											{% endif %}
										</div>
										<div class="text-xs text-white/60 mt-1">
											Demandé le
											{{ deposit.requestedAt|date('d/m/Y') }}
											{% if deposit.paidAt %}
												- Payé le
												{{ deposit.paidAt|date('d/m/Y') }}
											{% endif %}
										</div>
									</div>
								{% endfor %}
							</div>

							{% if quote.totalPaidDeposits > 0 %}
								<div class="flex justify-between items-center pt-3 border-t border-white/20 mb-4">
									<span class="text-white/60">Total accomptes payés</span>
									<span class="text-green-400 font-semibold">{{ quote.totalPaidDepositsFormatted }}</span>
								</div>
							{% endif %}
						{% else %}
							<p class="text-white/60 text-sm mb-4">Aucun accompte demandé pour ce devis.</p>
						{% endif %}

						{% if quote.invoice is null %}
							<button type="button" class="btn-primary w-full flex items-center justify-center gap-2" data-controller="request-deposit-modal-trigger" data-request-deposit-modal-trigger-url-value="{{ path('admin_quote_request_deposit', {id: quote.id}) }}" data-request-deposit-modal-trigger-csrf-token-value="{{ csrf_token('request_deposit_' ~ quote.id) }}" data-request-deposit-modal-trigger-total-ttc-value="{{ quote.montantTTC }}" data-request-deposit-modal-trigger-default-percentage-value="{{ quote.acomptePourcentage }}" data-action="click->request-deposit-modal-trigger#open">
								{{ ux_icon('lucide:plus-circle', {class: 'w-4 h-4'}) }}
								Demander un accompte
							</button>
						{% else %}
							<div class="text-center">
								<p class="text-sm text-white/60 mb-2">Facture générée</p>
								<a href="{{ path('admin_invoice_show', {id: quote.invoice.id}) }}" class="text-blue-400 hover:text-blue-300 text-sm">
									Voir la facture
									{{ quote.invoice.numero }}
								</a>
							</div>
						{% endif %}
					</div>
				{% endif %}

				{# Actions #}
				<div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl p-6 scroll-animate animate-delay-200">
					<h2 class="text-xl font-semibold text-white mb-6 flex items-center gap-2">
						{{ ux_icon('lucide:zap', {class: 'w-5 h-5'}) }}
						Actions
					</h2>

					<div class="space-y-3">
						{# Composant Actions #}
						{{ component('EntityActions', {
							entity: quote,
							type: 'quote',
							layout: 'vertical'
						}) }}

					</div>
				</div>

				{# Liens rapides - Liens signés pour le client #}
				{% if quote.statut.value in ['issued', 'sent'] %}
					<div class="scroll-animate animate-delay-300">
						{{ component('MagicLinks', {
							entity: quote,
							entityType: 'quote',
							availableActions: ['view', 'sign', 'refuse']
						}) }}
					</div>
				{% endif %}
			</div>
		</div>
	</div>

	{# Modal d'envoi d'email #}
	{{ component('EmailModal') }}

	{# Note: ConfirmModal n'est pas nécessaire ici car base.html.twig a déjà le contrôleur confirm-modal sur le body #}

	{# Modal de demande d'acompte #}
	{{ component('RequestDepositModal') }}

	{# Modal d'annulation avec raisons #}
{{ component('CancelModal') }}
{% endblock %}
