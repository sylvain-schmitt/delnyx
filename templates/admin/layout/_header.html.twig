{# Header Admin - Glassmorphique #}
<header class="fixed top-0 left-0 right-0 lg:left-64 bg-white/10 backdrop-blur-xl border-b border-white/20 z-40 transition-all duration-300" data-controller="admin-header">
	<div
		class="flex items-center justify-between h-16 px-6">

		{# Mobile Menu Button #}
		<button class="lg:hidden text-white/70 hover:text-white transition-colors duration-200" data-action="click->admin-sidebar#toggle">
			{{ ux_icon('lucide:menu', {class: 'w-6 h-6'}) }}
		</button>

		{# Page Title #}
		<div class="flex items-center space-x-4">
			<h1 class="text-xl font-semibold text-white">
				{% block page_title %}Administration
				{% endblock %}
			</h1>

			{# Breadcrumb #}
			<nav class="hidden md:flex items-center space-x-2 text-sm text-white/60">
				<a href="{{ path('admin_dashboard') }}" class="hover:text-white transition-colors duration-200 mr-2">
					Dashboard
				</a>
				{% block breadcrumb %}{% endblock %}
			</nav>
		</div>

		{# Header Actions #}
		<div
			class="flex items-center space-x-4">

			{# Search - Desktop: always visible, Mobile: hidden by default #}
			<div
				class="relative" data-controller="global-search" data-global-search-url-value="{{ path('admin_search') }}">
				{# Desktop Search Input #}
				<div class="hidden lg:block relative">
					<input type="text" placeholder="Rechercher..." class="w-64 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300" data-global-search-target="input" data-action="input->global-search#search keydown->global-search#navigate" autocomplete="off">
					<svg class="absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-white/60" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
					</svg>
				</div>

				{# Mobile Search Button & Overlay Input #}
				<div class="lg:hidden" data-controller="dropdown">
					<button class="p-2 text-white/70 hover:text-white transition-colors duration-200" data-action="click->dropdown#toggle">
						{{ ux_icon('lucide:search', {class: 'w-6 h-6'}) }}
					</button>

					<div class="fixed inset-x-0 top-16 p-4 bg-slate-800 border-b border-white/10 shadow-2xl z-50 hidden" data-dropdown-target="menu">
						<div class="relative">
							<input type="text" placeholder="Rechercher..." class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-blue-500" data-global-search-target="input" data-action="input->global-search#search keydown->global-search#navigate" autocomplete="off">
							<svg class="absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/60" fill="none" stroke="currentColor" viewbox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
							</svg>
						</div>
					</div>
				</div>

				{# Dropdown des résultats (Desktop & Mobile) #}
				<div
					class="fixed lg:absolute left-4 lg:left-0 right-4 lg:right-auto top-32 lg:top-full mt-2 lg:w-[32rem] bg-slate-800/95 backdrop-blur-xl border border-white/20 rounded-xl shadow-2xl z-50 hidden max-h-[60vh] lg:max-h-96 overflow-y-auto" data-global-search-target="dropdown">

					{# Loader #}
					<div class="p-8 text-center hidden" data-global-search-target="loading">
						<div class="inline-flex items-center gap-2 text-white/60">
							<svg class="animate-spin w-5 h-5" fill="none" viewbox="0 0 24 24">
								<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
								<path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
							</svg>
							Recherche...
						</div>
					</div>

					{# Aucun résultat #}
					<div class="p-8 text-center hidden" data-global-search-target="noResults">
						<svg class="w-12 h-12 text-white/20 mx-auto mb-2" fill="none" stroke="currentColor" viewbox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
						</svg>
						<p class="text-white/60 text-sm">Aucun résultat</p>
					</div>

					{# Résultats #}
					<div data-global-search-target="results"></div>
				</div>
			</div>

			{# Notifications #}
			<button class="relative p-2 text-white/70 hover:text-white transition-colors duration-200">
				<svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
				</svg>
				{# Notification Badge #}
				<span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
			</button>

			{# User Menu #}
			{% if app.user %}
				<div class="relative" data-controller="dropdown">
					<button class="flex items-center space-x-3 p-2 rounded-lg hover:bg-white/10 transition-colors duration-200" data-action="click->dropdown#toggle">
						{% if app.user.avatarPath %}
							<img src="{{ asset(app.user.avatarPath) }}" alt="{{ app.user.nomComplet }}" class="w-8 h-8 rounded-full object-cover border-2 border-white/20">
						{% else %}
							<div class="w-8 h-8 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center">
								<span class="text-white font-semibold text-sm">
									{% if app.user.prenom %}
										{{ app.user.prenom|first|upper }}
									{% else %}
										{{ app.user.email|first|upper }}
									{% endif %}
								</span>
							</div>
						{% endif %}
						<div class="hidden md:block text-left">
							<p class="text-white font-medium text-sm">
								{% if app.user.nomComplet and app.user.nomComplet != app.user.email %}
									{{ app.user.nomComplet }}
								{% else %}
									{{ app.user.email }}
								{% endif %}
							</p>
							<p class="text-white/60 text-xs">Administrateur</p>
						</div>
						<svg class="w-4 h-4 text-white/60" fill="none" stroke="currentColor" viewbox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
						</svg>
					</button>

					{# Dropdown Menu #}
					<div class="absolute right-0 mt-2 w-48 bg-slate-800/95 backdrop-blur-3xl border border-white/40 rounded-lg shadow-2xl z-50 hidden" data-dropdown-target="menu">
						<div class="py-2">
							<a href="{{ path('admin_profile_index') }}" class="flex items-center space-x-3 px-4 py-2 text-white/80 hover:text-white hover:bg-white/10 transition-colors duration-200">
								<svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
								</svg>
								<span>Mon Profil</span>
							</a>
							<a href="{{ path('admin_company_settings') }}" class="flex items-center space-x-3 px-4 py-2 text-white/80 hover:text-white hover:bg-white/10 transition-colors duration-200">
								<svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
								</svg>
								<span>Paramètres Entreprise</span>
							</a>
							<div class="border-t border-white/20 my-2"></div>
							<a href="{{ path('app_logout') }}" class="flex items-center space-x-3 px-4 py-2 text-red-300 hover:text-red-200 hover:bg-red-500/10 transition-colors duration-200">
								<svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
								</svg>
								<span>Déconnexion</span>
							</a>
						</div>
					</div>
				</div>
			{% else %}
				{# Bouton de connexion si non authentifié #}
				<a href="{{ path('app_login') }}" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors duration-200">
					Se connecter
				</a>
			{% endif %}
		</div>
	</div>
</header>
