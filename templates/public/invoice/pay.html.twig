{% extends 'public/layout/base.html.twig' %}

{% block title %}Payer la facture
	{{ invoice.numero }}
	- Delnyx
{% endblock %}

{% block body %}
	<div class="max-w-2xl mx-auto">
		<div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl p-8">
			<h1 class="text-2xl font-bold text-white mb-6">Paiement de la facture</h1>

			<div class="mb-6">
				<p class="text-white/80 mb-2">
					<span class="font-medium text-white">Facture :</span>
					{{ invoice.numero }}
				</p>
				<p class="text-white/80 mb-2">
					<span class="font-medium text-white">Client :</span>
					{{ invoice.client.nomComplet }}
				</p>
				<p class="text-2xl font-bold text-white mt-4">
					Montant à payer :
					{{ invoice.montantTTCFormate }}
				</p>
			</div>

			<div class="bg-blue-500/20 border border-blue-500/30 rounded-lg p-4 mb-6">
				<p class="text-blue-300 text-sm">
					{{ ux_icon('lucide:shield-check', {class: 'w-4 h-4 inline mr-2'}) }}
					Paiement sécurisé par
					<strong>Stripe</strong>. Vos informations de carte ne sont jamais stockées sur nos serveurs.
				</p>
			</div>

			<form method="post" data-turbo="false" class="space-y-6">
				<div class="flex items-start">
					<input type="checkbox" id="confirm_payment" name="confirm_payment" required class="mt-1 w-4 h-4 rounded border-white/20 bg-white/5 text-blue-500 focus:ring-2 focus:ring-blue-500">
					<label for="confirm_payment" class="ml-3 text-sm text-white/80">
						J'accepte de payer le montant de
						<strong>{{ invoice.montantTTCFormate }}</strong>
						pour cette facture. *
					</label>
				</div>

				<div class="flex gap-4">
					<button type="submit" name="provider" value="stripe" class="btn-primary flex-1 py-4 flex items-center justify-center gap-2">
						{{ ux_icon('lucide:credit-card', {class: 'w-5 h-5'}) }}
						Payer par Carte Bancaire
					</button>
				</div>

				<div class="flex gap-4">
					<a href="{{ magic_link(invoice, 'view') }}" class="btn-secondary flex-1 py-3 text-center">
						Annuler
					</a>
				</div>
			</form>
		</div>
	</div>
{% endblock %}
