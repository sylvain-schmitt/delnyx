{% extends 'admin/layout/base.html.twig' %}
{% import 'admin/macros/form_fields.html.twig' as form_macros %}

{% block title %}{{ title }} - Administration Delnyx{% endblock %}

{% block page_title %}{{ title }}{% endblock %}

{% block body %}
	<div class="max-w-3xl mx-auto space-y-6">

		{# Header #}
		<div class="flex items-center justify-between scroll-animate">
			<div class="flex items-center gap-4">
				<a href="{{ path('admin_tariff_index') }}" class="btn-secondary flex items-center gap-2">
					{{ ux_icon('lucide:arrow-left', {class: 'w-4 h-4'}) }}
					Retour
				</a>
				<h1 class="text-2xl font-bold text-white">{{ title }}</h1>
			</div>
		</div>

		{# Formulaire #}
		<div class="bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl p-8 scroll-animate">
		{{ form_start(form, {'attr': {'class': 'space-y-6', 'data-controller': 'admin-form', 'data-admin-form-target': 'form', 'novalidate': 'novalidate', 'data-action': 'submit->admin-form#handleSubmit'}}) }}

			{# Informations principales #}
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				{{ form_macros.form_field(form, 'nom', 'input') }}
				{{ form_macros.form_field(form, 'categorie', 'select') }}
			</div>

			{# Prix et unité #}
			<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
				{{ form_macros.form_field(form, 'prix', 'input') }}
				{{ form_macros.form_field(form, 'unite', 'select') }}
				{{ form_macros.form_field(form, 'ordre', 'input') }}
			</div>

			{# Description #}
			{{ form_macros.form_field(form, 'description', 'textarea') }}

			{# Caractéristiques #}
			{{ form_macros.form_field(form, 'caracteristiques', 'textarea') }}

			{# Statut #}
			<div class="flex items-center gap-3 p-4 bg-white/5 rounded-lg">
				{{ form_widget(form.actif, {'attr': {'class': 'form-checkbox', 'data-admin-form-target': 'field'}}) }}
				{{ form_label(form.actif, null, {'label_attr': {'class': 'text-white ml-2'}}) }}
				<div class="text-white/60 text-sm">{{ form_help(form.actif) }}</div>
			</div>

			{# Actions #}
			<div class="flex justify-end gap-4 pt-6 border-t border-white/10">
				<a href="{{ path('admin_tariff_index') }}" class="btn-secondary">
					Annuler
				</a>
				<button type="submit" class="btn-primary flex items-center gap-2" data-admin-form-target="submit">
					{{ ux_icon('lucide:check', {class: 'w-4 h-4'}) }}
					Enregistrer
				</button>
			</div>

			{{ form_end(form) }}
		</div>

		{# Aide contextuelle #}
		<div class="bg-blue-500/10 backdrop-blur-xl border border-blue-500/20 rounded-xl p-6 scroll-animate">
			<div class="flex items-start gap-4">
				{{ ux_icon('lucide:info', {class: 'w-6 h-6 text-blue-400 flex-shrink-0'}) }}
				<div>
					<h3 class="text-white font-semibold mb-2">Utilisation du catalogue</h3>
					<ul class="text-white/70 text-sm space-y-1">
						<li>• Les tarifs actifs apparaissent dans le sélecteur lors de la création de devis</li>
						<li>• Le prix et la description sont automatiquement pré-remplis</li>
						<li>• Vous pouvez modifier les valeurs après sélection sur chaque devis</li>
						<li>• Les caractéristiques servent de référence (non affichées sur le devis)</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
